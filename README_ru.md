üåê [English](README.md) | **–†—É—Å—Å–∫–∏–π** | [‰∏≠Êñá](README_zh.md)

# MCP Server for CM3588 NAS Kit

MCP —Å–µ—Ä–≤–µ—Ä –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å CM3588 NAS Kit - —Å–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–∞—è –±–∞–∑–∞ –∑–Ω–∞–Ω–∏–π, –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π, live-—Å—Ç–∞—Ç—É—Å —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞.

## –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  –õ–æ–∫–∞–ª—å–Ω—ã–π –∫–æ–º–ø—å—é—Ç–µ—Ä                                           ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îÇ
‚îÇ  ‚îÇ  Claude Code + MCP Server                                 ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ  ‚îú‚îÄ‚îÄ –ë–∞–∑–∞ –∑–Ω–∞–Ω–∏–π (Qdrant) - —Å–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–∏–π –ø–æ–∏—Å–∫          ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ  ‚îú‚îÄ‚îÄ Changelog - –∏—Å—Ç–æ—Ä–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π                        ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ  ‚îú‚îÄ‚îÄ SSH –∫–ª–∏–µ–Ω—Ç ‚Üí live-—Å—Ç–∞—Ç—É—Å CM3588                     ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ  ‚îî‚îÄ‚îÄ MCP Tools/Resources/Prompts                          ‚îÇ  ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îÇ
‚îÇ                          ‚îÇ                                      ‚îÇ
‚îÇ                          ‚îÇ SSH                                  ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                           ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  CM3588 NAS Kit (192.168.1.173)                                ‚îÇ
‚îÇ  ‚îú‚îÄ‚îÄ RK3588 (NPU 6 TOPS)                                       ‚îÇ
‚îÇ  ‚îú‚îÄ‚îÄ Wyoming/Whisper/Piper —Å–µ—Ä–≤–∏—Å—ã                             ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ –ú–∏–∫—Ä–æ—Ñ–æ–Ω, –∫–∞–º–µ—Ä—ã, GPIO                                    ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

## –£—Å—Ç–∞–Ω–æ–≤–∫–∞

### 1. –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏

```bash
# –°–æ–∑–¥–∞—Ç—å –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ
python -m venv .venv
source .venv/bin/activate

# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
pip install -e .
```

### 2. Qdrant

```bash
docker-compose up -d
```

### 3. –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

```bash
cp .env.example .env
```

–ù–∞—Å—Ç—Ä–æ–∏—Ç—å –≤ `.env`:
- `CM3588_HOST` - IP –∞–¥—Ä–µ—Å CM3588 (192.168.1.173)
- `CM3588_USER` - –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å SSH (root)
- `CM3588_SSH_KEY` - –ø—É—Ç—å –∫ SSH –∫–ª—é—á—É (~/.ssh/id_ed25519)
- `QDRANT_HOST`, `QDRANT_PORT` - Qdrant (localhost:6333)

### 4. SSH –∫–ª—é—á

```bash
ssh-copy-id -i ~/.ssh/id_ed25519.pub root@192.168.1.173
```

## –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ Claude Code

–°–æ–∑–¥–∞—Ç—å `.mcp.json` –≤ –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞ –∏–ª–∏ –≤ –ø–∞–ø–∫–µ –≥–¥–µ —Ä–∞–±–æ—Ç–∞–µ—Ç–µ:

```json
{
  "mcpServers": {
    "cm3588": {
      "command": "/home/user/mcp-cm3588/.venv/bin/python",
      "args": ["-m", "mcp_cm3588.server"],
      "cwd": "/home/user/mcp-cm3588"
    }
  }
}
```

–ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å Claude Code –∏–ª–∏ –≤—ã–ø–æ–ª–Ω–∏—Ç—å `/mcp restart cm3588`.

## Tools (11 –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤)

### –ë–∞–∑–∞ –∑–Ω–∞–Ω–∏–π
| Tool | –û–ø–∏—Å–∞–Ω–∏–µ |
|------|----------|
| `save_knowledge(title, content, category, tags)` | –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –∑–Ω–∞–Ω–∏–µ |
| `search_knowledge(query, category, limit)` | –°–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–∏–π –ø–æ–∏—Å–∫ |
| `get_knowledge(entry_id)` | –ü–æ–ª—É—á–∏—Ç—å –∑–∞–ø–∏—Å—å –ø–æ ID |
| `update_knowledge(entry_id, content, append)` | –û–±–Ω–æ–≤–∏—Ç—å –∑–∞–ø–∏—Å—å |
| `list_categories()` | –°–ø–∏—Å–æ–∫ –∫–∞—Ç–µ–≥–æ—Ä–∏–π |
| `list_knowledge(category, limit)` | –ó–∞–ø–∏—Å–∏ –≤ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ |

### –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
| Tool | –û–ø–∏—Å–∞–Ω–∏–µ |
|------|----------|
| `log_change(what, why, details, files_changed, commands_run)` | –ó–∞–ª–æ–≥–∏—Ä–æ–≤–∞—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏–µ |
| `log_solution(problem, solution, steps)` | –°–æ—Ö—Ä–∞–Ω–∏—Ç—å —Ä–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º—ã |
| `get_changelog(limit)` | –ò—Å—Ç–æ—Ä–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π |

### –î–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
| Tool | –û–ø–∏—Å–∞–Ω–∏–µ |
|------|----------|
| `document_config(service_name, config_path, description)` | –ó–∞–¥–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å –∫–æ–Ω—Ñ–∏–≥ |
| `create_howto(title, steps, category, tags)` | –°–æ–∑–¥–∞—Ç—å –ø–æ—à–∞–≥–æ–≤—ã–π –≥–∞–π–¥ |

## Resources (14 —Ä–µ—Å—É—Ä—Å–æ–≤)

### –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è (—Å—Ç–∞—Ç–∏–∫–∞)
| URI | –û–ø–∏—Å–∞–Ω–∏–µ |
|-----|----------|
| `docs://hardware` | –°–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏–∏ CM3588 |
| `docs://npu` | –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è NPU/RKNN |
| `docs://wyoming` | Wyoming Protocol |
| `docs://llm` | LLM –Ω–∞ RK3588 |

### Live —Å—Ç–∞—Ç—É—Å (—Å —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ —á–µ—Ä–µ–∑ SSH)
| URI | –û–ø–∏—Å–∞–Ω–∏–µ |
|-----|----------|
| `live://system` | Uptime, –ø–∞–º—è—Ç—å, –¥–∏—Å–∫, —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞ |
| `live://services` | Docker –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã |
| `live://npu` | –°—Ç–∞—Ç—É—Å NPU, –¥—Ä–∞–π–≤–µ—Ä, –∑–∞–≥—Ä—É–∑–∫–∞ |
| `live://network` | IP –∞–¥—Ä–µ—Å–∞, –ø–æ—Ä—Ç—ã |
| `live://voice-pipeline` | Whisper/Piper/Wake —Å—Ç–∞—Ç—É—Å |
| `live://llm` | LLM –ø—Ä–æ—Ü–µ—Å—Å—ã –∏ –º–æ–¥–µ–ª–∏ |

### –ö–æ–Ω—Ñ–∏–≥–∏ (—Å —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞)
| URI | –û–ø–∏—Å–∞–Ω–∏–µ |
|-----|----------|
| `config://whisper` | Docker inspect whisper |
| `config://piper` | Docker inspect piper |
| `config://docker-compose` | docker-compose.yml —Ñ–∞–π–ª—ã |

### –õ–æ–≥–∏ (—Å —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞)
| URI | –û–ø–∏—Å–∞–Ω–∏–µ |
|-----|----------|
| `logs://whisper` | –õ–æ–≥–∏ Whisper (50 —Å—Ç—Ä–æ–∫) |
| `logs://piper` | –õ–æ–≥–∏ Piper |
| `logs://system` | –°–∏—Å—Ç–µ–º–Ω—ã–µ –ª–æ–≥–∏ |

## Prompts (7 —à–∞–±–ª–æ–Ω–æ–≤)

| Prompt | –û–ø–∏—Å–∞–Ω–∏–µ |
|--------|----------|
| `setup_microphone` | –ù–∞—Å—Ç—Ä–æ–π–∫–∞ USB –º–∏–∫—Ä–æ—Ñ–æ–Ω–∞ |
| `setup_camera` | –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∫–∞–º–µ—Ä—ã |
| `setup_llm_npu` | –ó–∞–ø—É—Å–∫ LLM –Ω–∞ NPU |
| `optimize_model_npu` | –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –º–æ–¥–µ–ª–∏ –¥–ª—è RKNN |
| `troubleshoot_voice` | –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –≥–æ–ª–æ—Å–æ–≤–æ–≥–æ –ø–∞–π–ø–ª–∞–π–Ω–∞ |
| `after_change` | –ß—Ç–æ –¥–µ–ª–∞—Ç—å –ø–æ—Å–ª–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π |
| `document_current_state` | –î–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Ç–µ–∫—É—â–µ–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è |

## –ö–∞—Ç–µ–≥–æ—Ä–∏–∏ –∑–Ω–∞–Ω–∏–π

- `hardware` - –∂–µ–ª–µ–∑–æ, —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏–∏
- `voice-pipeline` - –≥–æ–ª–æ—Å–æ–≤–æ–π –ø–∞–π–ø–ª–∞–π–Ω (Whisper, Piper, Wake Word)
- `npu` - NPU, RKNN, —É—Å–∫–æ—Ä–µ–Ω–∏–µ –º–æ–¥–µ–ª–µ–π
- `docker` - Docker –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã –∏ –∫–æ–Ω—Ñ–∏–≥–∏
- `troubleshooting` - —Ä–µ—à–µ–Ω–∏—è –ø—Ä–æ–±–ª–µ–º

## –ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

–ü–æ—Å–ª–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è MCP —Å–µ—Ä–≤–µ—Ä–∞ Claude Code –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:

1. **–ò—â–µ—Ç –≤ –±–∞–∑–µ –∑–Ω–∞–Ω–∏–π –ø–µ—Ä–µ–¥ —Ä–∞–±–æ—Ç–æ–π:**
   ```
   > –ö–∞–∫ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å –º–∏–∫—Ä–æ—Ñ–æ–Ω?
   [Claude –∏—Å–ø–æ–ª—å–∑—É–µ—Ç search_knowledge("–º–∏–∫—Ä–æ—Ñ–æ–Ω")]
   ```

2. **–õ–æ–≥–∏—Ä—É–µ—Ç –∏–∑–º–µ–Ω–µ–Ω–∏—è:**
   ```
   > –ü–æ–º–µ–Ω—è–ª –∫–æ–Ω—Ñ–∏–≥ whisper
   [Claude –∏—Å–ø–æ–ª—å–∑—É–µ—Ç log_change()]
   ```

3. **–ü—Ä–æ–≤–µ—Ä—è–µ—Ç live —Å—Ç–∞—Ç—É—Å:**
   ```
   > –ß—Ç–æ —Å –≥–æ–ª–æ—Å–æ–≤—ã–º –ø–∞–π–ø–ª–∞–π–Ω–æ–º?
   [Claude —á–∏—Ç–∞–µ—Ç live://voice-pipeline]
   ```

4. **–°–æ—Ö—Ä–∞–Ω—è–µ—Ç —Ä–µ—à–µ–Ω–∏—è:**
   ```
   > –ò—Å–ø—Ä–∞–≤–∏–ª –ø—Ä–æ–±–ª–µ–º—É —Å NPU
   [Claude –∏—Å–ø–æ–ª—å–∑—É–µ—Ç log_solution()]
   ```

## –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞

```bash
# –ó–∞–ø—É—Å–∫ —Å–µ—Ä–≤–µ—Ä–∞ –Ω–∞–ø—Ä—è–º—É—é
python -m mcp_cm3588.server

# –õ–∏–Ω—Ç–∏–Ω–≥
ruff check src/
ruff format src/

# –¢–µ—Å—Ç—ã
pytest
```
