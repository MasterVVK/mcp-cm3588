ğŸŒ [English](README.md) | [Ğ ÑƒÑÑĞºĞ¸Ğ¹](README_ru.md) | **ä¸­æ–‡**

# CM3588 NAS Kit MCP æœåŠ¡å™¨

CM3588 NAS Kit çš„ MCP æœåŠ¡å™¨ - è¯­ä¹‰çŸ¥è¯†åº“ã€å˜æ›´æ—¥å¿—ã€è®¾å¤‡å®æ—¶çŠ¶æ€ã€‚

## æ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  æœ¬åœ°è®¡ç®—æœº                                                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  Claude Code + MCP Server                                 â”‚  â”‚
â”‚  â”‚  â”œâ”€â”€ çŸ¥è¯†åº“ (Qdrant) - è¯­ä¹‰æœç´¢                           â”‚  â”‚
â”‚  â”‚  â”œâ”€â”€ å˜æ›´æ—¥å¿— - æ›´æ”¹å†å²                                   â”‚  â”‚
â”‚  â”‚  â”œâ”€â”€ SSH å®¢æˆ·ç«¯ â†’ CM3588 å®æ—¶çŠ¶æ€                         â”‚  â”‚
â”‚  â”‚  â””â”€â”€ MCP Tools/Resources/Prompts                          â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                          â”‚                                      â”‚
â”‚                          â”‚ SSH                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  CM3588 NAS Kit (192.168.1.173)                                â”‚
â”‚  â”œâ”€â”€ RK3588 (NPU 6 TOPS)                                       â”‚
â”‚  â”œâ”€â”€ Wyoming/Whisper/Piper æœåŠ¡                                â”‚
â”‚  â””â”€â”€ éº¦å…‹é£ã€æ‘„åƒå¤´ã€GPIO                                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## å®‰è£…

### 1. ä¾èµ–

```bash
# åˆ›å»ºè™šæ‹Ÿç¯å¢ƒ
python -m venv .venv
source .venv/bin/activate

# å®‰è£…ä¾èµ–
pip install -e .
```

### 2. Qdrant

```bash
docker-compose up -d
```

### 3. é…ç½®

```bash
cp .env.example .env
```

åœ¨ `.env` ä¸­é…ç½®ï¼š
- `CM3588_HOST` - CM3588 IP åœ°å€ (192.168.1.173)
- `CM3588_USER` - SSH ç”¨æˆ· (root)
- `CM3588_SSH_KEY` - SSH å¯†é’¥è·¯å¾„ (~/.ssh/id_ed25519)
- `QDRANT_HOST`, `QDRANT_PORT` - Qdrant (localhost:6333)

### 4. SSH å¯†é’¥

```bash
ssh-copy-id -i ~/.ssh/id_ed25519.pub root@192.168.1.173
```

## è¿æ¥åˆ° Claude Code

åœ¨é¡¹ç›®æ ¹ç›®å½•åˆ›å»º `.mcp.json`ï¼š

```json
{
  "mcpServers": {
    "cm3588": {
      "command": "/path/to/mcp-cm3588/.venv/bin/python",
      "args": ["-m", "mcp_cm3588.server"],
      "cwd": "/path/to/mcp-cm3588"
    }
  }
}
```

é‡å¯ Claude Code æˆ–è¿è¡Œ `/mcp restart cm3588`ã€‚

## å·¥å…· (11 ä¸ª)

### çŸ¥è¯†åº“
| å·¥å…· | æè¿° |
|------|------|
| `save_knowledge(title, content, category, tags)` | ä¿å­˜çŸ¥è¯† |
| `search_knowledge(query, category, limit)` | è¯­ä¹‰æœç´¢ |
| `get_knowledge(entry_id)` | æŒ‰ ID è·å–æ¡ç›® |
| `update_knowledge(entry_id, content, append)` | æ›´æ–°æ¡ç›® |
| `list_categories()` | åˆ—å‡ºåˆ†ç±» |
| `list_knowledge(category, limit)` | åˆ—å‡ºåˆ†ç±»ä¸­çš„æ¡ç›® |

### æ—¥å¿—
| å·¥å…· | æè¿° |
|------|------|
| `log_change(what, why, details, files_changed, commands_run)` | è®°å½•å˜æ›´ |
| `log_solution(problem, solution, steps)` | ä¿å­˜é—®é¢˜è§£å†³æ–¹æ¡ˆ |
| `get_changelog(limit)` | è·å–å˜æ›´å†å² |

### æ–‡æ¡£
| å·¥å…· | æè¿° |
|------|------|
| `document_config(service_name, config_path, description)` | è®°å½•é…ç½® |
| `create_howto(title, steps, category, tags)` | åˆ›å»ºåˆ†æ­¥æŒ‡å— |

## èµ„æº (14 ä¸ª)

### æ–‡æ¡£ï¼ˆé™æ€ï¼‰
| URI | æè¿° |
|-----|------|
| `docs://hardware` | CM3588 è§„æ ¼ |
| `docs://npu` | NPU/RKNN æ–‡æ¡£ |
| `docs://wyoming` | Wyoming åè®® |
| `docs://llm` | RK3588 ä¸Šçš„ LLM |

### å®æ—¶çŠ¶æ€ï¼ˆé€šè¿‡ SSH ä»è®¾å¤‡è·å–ï¼‰
| URI | æè¿° |
|-----|------|
| `live://system` | è¿è¡Œæ—¶é—´ã€å†…å­˜ã€ç£ç›˜ã€æ¸©åº¦ |
| `live://services` | Docker å®¹å™¨ |
| `live://npu` | NPU çŠ¶æ€ã€é©±åŠ¨ã€è´Ÿè½½ |
| `live://network` | IP åœ°å€ã€ç«¯å£ |
| `live://voice-pipeline` | Whisper/Piper/Wake çŠ¶æ€ |
| `live://llm` | LLM è¿›ç¨‹å’Œæ¨¡å‹ |

### é…ç½®ï¼ˆä»è®¾å¤‡è·å–ï¼‰
| URI | æè¿° |
|-----|------|
| `config://whisper` | Docker inspect whisper |
| `config://piper` | Docker inspect piper |
| `config://docker-compose` | docker-compose.yml æ–‡ä»¶ |

### æ—¥å¿—ï¼ˆä»è®¾å¤‡è·å–ï¼‰
| URI | æè¿° |
|-----|------|
| `logs://whisper` | Whisper æ—¥å¿—ï¼ˆ50 è¡Œï¼‰|
| `logs://piper` | Piper æ—¥å¿— |
| `logs://system` | ç³»ç»Ÿæ—¥å¿— |

## æç¤ºæ¨¡æ¿ (7 ä¸ª)

| æç¤º | æè¿° |
|------|------|
| `setup_microphone` | USB éº¦å…‹é£è®¾ç½® |
| `setup_camera` | æ‘„åƒå¤´è®¾ç½® |
| `setup_llm_npu` | åœ¨ NPU ä¸Šè¿è¡Œ LLM |
| `optimize_model_npu` | ä¸º RKNN ä¼˜åŒ–æ¨¡å‹ |
| `troubleshoot_voice` | è¯­éŸ³ç®¡é“è¯Šæ–­ |
| `after_change` | æ›´æ”¹åçš„æ“ä½œ |
| `document_current_state` | è®°å½•å½“å‰çŠ¶æ€ |

## çŸ¥è¯†åˆ†ç±»

- `hardware` - ç¡¬ä»¶ã€è§„æ ¼
- `voice-pipeline` - è¯­éŸ³ç®¡é“ï¼ˆWhisperã€Piperã€Wake Wordï¼‰
- `npu` - NPUã€RKNNã€æ¨¡å‹åŠ é€Ÿ
- `docker` - Docker å®¹å™¨å’Œé…ç½®
- `troubleshooting` - é—®é¢˜è§£å†³æ–¹æ¡ˆ

## ä½¿ç”¨ç¤ºä¾‹

è¿æ¥ MCP æœåŠ¡å™¨åï¼ŒClaude Code è‡ªåŠ¨ï¼š

1. **å·¥ä½œå‰æœç´¢çŸ¥è¯†åº“ï¼š**
   ```
   > å¦‚ä½•è®¾ç½®éº¦å…‹é£ï¼Ÿ
   [Claude ä½¿ç”¨ search_knowledge("éº¦å…‹é£")]
   ```

2. **è®°å½•å˜æ›´ï¼š**
   ```
   > æ›´æ”¹äº† whisper é…ç½®
   [Claude ä½¿ç”¨ log_change()]
   ```

3. **æ£€æŸ¥å®æ—¶çŠ¶æ€ï¼š**
   ```
   > è¯­éŸ³ç®¡é“çŠ¶æ€å¦‚ä½•ï¼Ÿ
   [Claude è¯»å– live://voice-pipeline]
   ```

4. **ä¿å­˜è§£å†³æ–¹æ¡ˆï¼š**
   ```
   > ä¿®å¤äº† NPU é—®é¢˜
   [Claude ä½¿ç”¨ log_solution()]
   ```

## å¼€å‘

```bash
# ç›´æ¥è¿è¡ŒæœåŠ¡å™¨
python -m mcp_cm3588.server

# ä»£ç æ£€æŸ¥
ruff check src/
ruff format src/

# æµ‹è¯•
pytest
```

## è®¸å¯è¯

MIT è®¸å¯è¯ - è§ [LICENSE](LICENSE)
